<html>
  <head>
    <title>Default Place Picker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Default Place Picker">

    <!-- Corrected Token -->
    <script src="https://apis.mappls.com/advancedmaps/api/9c3b6a8b5c6c0ac6a5051cf25ba004bc/map_sdk?layer=vector&v=3.0&callback=initMap1"></script>
    <script src="https://apis.mappls.com/advancedmaps/api/9c3b6a8b5c6c0ac6a5051cf25ba004bc/map_sdk_plugins?v=3.0"></script>
    <style>
      body { margin: 0; }
      #map { width: 100%; height: 90vh; margin: 0; padding: 0; }
      #form { padding: 10px; text-align: center; }
    </style>
  </head>
  <body>
    <div id="form">
      <label for="latitude">Latitude: </label>
      <input type="number" id="latitude" placeholder="Enter Latitude" step="any">
      <label for="longitude">Longitude: </label>
      <input type="number" id="longitude" placeholder="Enter Longitude" step="any">
      <button onclick="pinLocation()">Pin Location</button>
    </div>
    <div id="map"></div>
    <script>
      var map;
      var currentMarker = null; // Store the current marker reference

      function initMap1() {
        map = new mappls.Map('map', {
          center: [28.62, 77.09], // Default center
          zoom: 5
        });
      }

      function pinLocation() {
        // Get user input
        var lat = parseFloat(document.getElementById('latitude').value);
        var lng = parseFloat(document.getElementById('longitude').value);

        if (!isNaN(lat) && !isNaN(lng)) {
          // Center map to the user-specified coordinates
          map.setCenter([lat, lng]);

          // Remove the previous marker if it exists
          if (currentMarker) {
            currentMarker.remove();
          }

          // Add a new marker at the specified location
          currentMarker = new mappls.Marker({
            position: { lat: lat, lng: lng },
            map: map
          });

          alert(`Pinned location: Latitude ${lat}, Longitude ${lng}`);
        } else {
          alert("Please enter valid latitude and longitude values.");
        }
      }
    </script>
  </body>
</html>
